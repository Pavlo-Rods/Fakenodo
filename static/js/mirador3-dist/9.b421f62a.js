(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1079:function(e,t,n){"use strict";n.r(t);var r=n(9),o=n(10),a=n(7),i=n(13),c=n(0),s=n.n(c),l=n(492),u=n(11),f=n.n(u),p=n(334),d=n(335),h=n(385),b=n(23),y=n(1),v=n(5),m=n(4),g=n(72),w=Object(g.a)(c.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");var O=c.forwardRef((function(e,t){var n=e.alt,r=e.children,o=e.classes,a=e.className,i=e.component,s=void 0===i?"div":i,l=e.imgProps,u=e.sizes,f=e.src,p=e.srcSet,d=e.variant,h=void 0===d?"circular":d,b=Object(v.a)(e,["alt","children","classes","className","component","imgProps","sizes","src","srcSet","variant"]),g=null,O=function(e){var t=e.src,n=e.srcSet,r=c.useState(!1),o=r[0],a=r[1];return c.useEffect((function(){if(t||n){a(!1);var e=!0,r=new Image;return r.src=t,r.srcSet=n,r.onload=function(){e&&a("loaded")},r.onerror=function(){e&&a("error")},function(){e=!1}}}),[t,n]),o}({src:f,srcSet:p}),j=f||p,P=j&&"error"!==O;return g=P?c.createElement("img",Object(y.a)({alt:n,src:f,srcSet:p,sizes:u,className:o.img},l)):null!=r?r:j&&n?n[0]:c.createElement(w,{className:o.fallback}),c.createElement(s,Object(y.a)({className:Object(m.default)(o.root,o.system,o[h],a,!P&&o.colorDefault),ref:t},b),g)})),j=Object(a.a)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},circle:{},circular:{},rounded:{borderRadius:e.shape.borderRadius},square:{borderRadius:0},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4},fallback:{width:"75%",height:"75%"}}}),{name:"MuiAvatar"})(O),P=n(906),C=n(938),E=n.n(C),I=n(300),x=n.n(I),k=n(54),S=n.n(k),A=(n(521),n(423)),N=n(39),_=n(98);function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,D(r.key),r)}}function D(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function T(e,t,n){return t=z(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],z(e).constructor):t.apply(e,n))}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var $=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=T(this,t,[e])).state={requestedAnnotations:!1},n.handleSelect=n.handleSelect.bind(n),n.handleKey=n.handleKey.bind(n),n.handleIntersection=n.handleIntersection.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(t,e),n=t,(r=[{key:"handleSelect",value:function(){var e=this.props,t=e.canvas,n=e.selected,r=e.setCanvas,o=e.focusOnCanvas;n?o():r(t.id)}},{key:"handleKey",value:function(e){var t=this.props,n=t.canvas,r=t.setCanvas,o=t.focusOnCanvas;this.keys={enter:"Enter",space:" "},this.chars={enter:13,space:32},e.key===this.keys.enter||e.which===this.chars.enter||e.key===this.keys.space||e.which===this.chars.space?o():r(n.id)}},{key:"handleIntersection",value:function(e){var t=e.isIntersecting,n=this.props,r=n.annotationsCount,o=n.requestCanvasAnnotations,a=this.state.requestedAnnotations;!t||void 0===r||r>0||a||(this.setState({requestedAnnotations:!0}),o())}},{key:"render",value:function(){var e=this.props,t=e.annotationsCount,n=e.searchAnnotationsCount,r=e.canvas,o=e.classes,a=e.config,i=e.selected,c=new N.a(r);return s.a.createElement(A.a,{onChange:this.handleIntersection},s.a.createElement("div",{key:r.index,className:S()(o.galleryViewItem,i?o.selected:"",n>0?o.hasAnnotations:""),onClick:this.handleSelect,onKeyUp:this.handleKey,role:"button",tabIndex:0},s.a.createElement(_.a,{resource:r,labelled:!0,variant:"outside",maxWidth:a.width,maxHeight:a.height,style:{margin:"0 auto",maxWidth:"".concat(Math.ceil(a.height*c.aspectRatio),"px")}},s.a.createElement("div",{className:o.chips},n>0&&s.a.createElement(P.a,{avatar:s.a.createElement(j,{className:o.avatar,classes:{circle:o.avatarIcon}},s.a.createElement(x.a,{fontSize:"small"})),label:n,className:S()(o.searchChip),size:"small"}),(t||0)>0&&s.a.createElement(P.a,{avatar:s.a.createElement(j,{className:o.avatar,classes:{circle:o.avatarIcon}},s.a.createElement(E.a,{className:o.annotationIcon})),label:t,className:S()(o.annotationsChip),size:"small"})))))}}])&&R(n.prototype,r),o&&R(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(c.Component);$.defaultProps={annotationsCount:void 0,config:{height:100,width:null},requestCanvasAnnotations:function(){},searchAnnotationsCount:0,selected:!1};var K=n(32),B=n(414),V=n(90),W=n(424),F=n(67);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=Object(r.compose)(Object(o.b)((function(e,t){var n=t.canvas,r=t.windowId,o=Object(K.g)(e,{windowId:r}),a=Object(B.f)(e,{windowId:r}),i=f()(a.map((function(e){return e.resources}))).filter((function(e){return e.targetId===n.id})),c=Object(V.e)(e,{content:"annotations",windowId:r}).length>0;return{annotationsCount:function(){if(c)return Object(W.d)(e,{canvasId:n.id}).reduce((function(e,t){return e+t.resources.filter((function(e){return e.targetId===n.id})).length}),0)}(),config:Object(F.a)(e).galleryView,searchAnnotationsCount:i.length,selected:o&&o.id===n.id}}),(function(e,t){var n=t.canvas,r=(t.id,t.windowId);return{focusOnCanvas:function(){return e(p.i(r,"single"))},requestCanvasAnnotations:function(){return e(d.f(r,n.id))},setCanvas:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e(h.a.apply(b,[r].concat(n)))}}})),Object(a.a)((function(e){return{annotationIcon:{height:"1rem",width:"1rem"},annotationsChip:M({},e.typography.caption),avatar:{backgroundColor:"transparent"},chips:{opacity:.875,position:"absolute",right:0,textAlign:"right",top:0},galleryViewItem:{"&$hasAnnotations":{border:"2px solid ".concat(e.palette.action.selected)},"&$selected,&$selected$hasAnnotations":{border:"2px solid ".concat(e.palette.primary.main)},"&:focus":{outline:"none"},"&:hover":{backgroundColor:e.palette.action.hover},border:"2px solid transparent",cursor:"pointer",display:"inline-block",margin:"".concat(e.spacing(1),"px ").concat(e.spacing(.5),"px"),maxHeight:function(e){return e.config.height+45},minWidth:"60px",overflow:"hidden",padding:e.spacing(.5),position:"relative",width:"min-content"},hasAnnotations:{},searchChip:M(M({},e.typography.caption),{},{"&$selected $avatar":{backgroundColor:e.palette.highlights.primary},marginTop:2}),selected:{}}})))($);function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y(r.key),r)}}function Y(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function L(e,t,n){return t=Q(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],Q(e).constructor):t.apply(e,n))}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t){return(Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var ee=function(e){function t(){return U(this,t),L(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.canvases,n=e.classes,r=e.viewingDirection,o=e.windowId,a="right-to-left"===r?"rtl":"ltr";return s.a.createElement(l.a,{component:"section",dir:a,square:!0,elevation:0,className:n.galleryContainer,id:"".concat(o,"-gallery")},t.map((function(e){return s.a.createElement(G,{key:e.id,windowId:o,canvas:e})})))}}])&&X(n.prototype,r),o&&X(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(c.Component);ee.defaultProps={classes:{},viewingDirection:""};var te=n(51),ne=Object(r.compose)(Object(a.a)((function(e){return{galleryContainer:{alignItems:"flex-start",display:"flex",flexDirection:"row",flexWrap:"wrap",overflowX:"hidden",overflowY:"scroll",padding:"50px 0 50px 20px",width:"100%"}}})),Object(o.b)((function(e,t){var n=t.windowId;return{canvases:Object(K.f)(e,{windowId:n}),viewingDirection:Object(te.e)(e,{windowId:n})}})),Object(i.a)("GalleryView"));t.default=ne(ee)}}]);
//# sourceMappingURL=9.b421f62a.js.map